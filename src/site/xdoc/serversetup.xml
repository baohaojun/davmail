<?xml version="1.0"?>
<document xmlns="http://maven.apache.org/XDOC/2.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">

    <properties>
        <title>DavMail POP/IMAP/SMTP/CalDav/LDAP Exchange Gateway - Server setup</title>
        <author email="mguessan@free.fr">Mickael Guessant</author>
    </properties>

    <body>

        <section name="DavMail Setup as a standalone server">
            <p>Prerequisite : Sun J2SE 1.5 or 1.6.
            </p>

            <p>Davmail Gateway can now run in server mode as a gateway between the mail
                client and the Outlook Web Access (Exchange) server.
                In server mode Davmail can run on any Java supported platform. This is
                currently the only way to run DavMail on MacOS X due to poor Java support
                (no Java 6 yet).
                This mode was tested successfully with the Iphone and should work with
                any phone with POP/IMAP/SMTP/LDAP/Caldav client.
            </p>

            <p>Download the generic DavMail package from Sourceforge and uncompress it with
                your favorite tool, e.g. on Linux:<code>unzip davmail-*.zip</code>.
            </p>
            <p>Prepare a davmail.properties file according to you local needs :
            </p>
            <source>
davmail.url=http://exchangeServer/exchange/
davmail.popPort=1110
davmail.imapPort=1143
davmail.smtpPort=1025
davmail.caldavPort=1080
davmail.ldapPort=1389
davmail.keepDelay=30
davmail.sentKeepDelay=90
davmail.caldavPastDelay=90
davmail.enableProxy=false
davmail.proxyHost=
davmail.proxyPort=
davmail.proxyUser=
davmail.proxyPassword=
davmail.ssl.keystoreType=JKS
davmail.ssl.keyPass=
davmail.ssl.keystoreFile=
davmail.ssl.keystorePass=
davmail.server=true
davmail.server.certificate.hash=
davmail.bindAddress=
davmail.allowRemote=true
davmail.disableUpdateCheck=false
log4j.rootLogger=WARN
log4j.logger.davmail=DEBUG
log4j.logger.org.apache.commons.httpclient=WARN
log4j.logger.httpclient.wire=WARN
davmail.logFilePath=/var/log/davmail.log
            </source>
            <p>See
                <a href="gettingstarted.html">Getting started</a>
                for more information on
                the options. Make sure davmail.server is set to true (no icon tray) and allow
                remote connections: davmail.allowRemote=true.
            </p>
            <p>To disable a service, set an empty port value.</p>
            <p>Launch Davmail with the following command:
                <source>nohup davmail.sh davmail.properties &amp;</source>.
            </p>
            <p>Then check messages:
                <source>tail -f nohup.out</source>
            </p>
        </section>

        <section name="DavMail Setup as a JEE Web Application">
            <p>Prerequisites : Sun J2SE 1.5 or 1.6 and any JEE compliant web container
            </p>

            <p>Davmail Gateway can now be deployed in any JEE application server using
                the war package. In this mode, DavMail listener threads run inside the
                application server and follow the web application lifecycle (start,
                stop, deploy, undeploy). The following items describe Tomcat deployment,
                details will vary according to the specific application server available.
            </p>

            <p>Download the war DavMail package from Sourceforge<code>davmail-*.war</code>,
                and deploy it inside the application server. In Tomcat, this means copy the
                war file to the webapps directory. If Tomcat is started and automatic
                deployment enabled (this is the default configuration), the package is
                automatically uncompressed and started.
            </p>
            <p>The davmail.properties configuration file is then available under
                <code>davmail-*/WEB-INF/classes</code>.
            </p>

            <p>See above and
                <a href="gettingstarted.html">Getting started</a>
                for more information on
                the options. Make sure davmail.server is set to true (no icon tray) and allow
                remote connections: davmail.allowRemote=true.
            </p>
        </section>
    </body>
</document>